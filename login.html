<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login â€” Shop</title>
<style>
body{
  margin:0;display:flex;justify-content:center;align-items:center;
  height:100vh;font-family:Arial;background:#f1f5f9;
}
.card{
  background:white;padding:30px;border-radius:12px;box-shadow:0 4px 18px rgba(0,0,0,0.1);
  width:90%;max-width:350px;text-align:center;
}
input{
  width:100%;padding:10px;margin:8px 0;border:1px solid #ddd;border-radius:8px;
}
button{
  width:100%;padding:10px;background:#2563eb;color:white;border:0;border-radius:8px;
  font-weight:700;cursor:pointer;margin-top:10px;
}
h2{color:#2563eb;margin-bottom:10px}
.error{color:red;margin-top:10px}
.toggle-btn{
  margin-top:5px; background:#f3f3f3;color:#2563eb; border:none;cursor:pointer;padding:5px;border-radius:5px;
}
</style>
</head>
<body>

<div class="card">
  <h2 id="formTitle">Login</h2>
  <input type="email" id="email" placeholder="Gmail" required>
  <input type="password" id="password" placeholder="Password" required>
  <button id="submitBtn">Login</button>
  <div id="msg" class="error"></div>
  <button class="toggle-btn" id="toggleBtn">Switch to Sign Up</button>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>

<script>
// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyCAU5ecL2IJypUmkXwVbt7f-wV-pdKkY9U",
  authDomain: "shophut-a5f7f.firebaseapp.com",
  projectId: "shophut-a5f7f",
  storageBucket: "shophut-a5f7f.appspot.com",
  messagingSenderId: "767008652056",
  appId: "1:767008652056:web:1a4ed7feae55a31a533c6d",
  measurementId: "G-M1G44X839C"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();

// Admin email
const ADMIN_EMAIL = "admin@gmail.com";

let isLogin = true;

const emailInput = document.getElementById('email');
const passwordInput = document.getElementById('password');
const submitBtn = document.getElementById('submitBtn');
const msg = document.getElementById('msg');
const formTitle = document.getElementById('formTitle');
const toggleBtn = document.getElementById('toggleBtn');

// Toggle login/signup
toggleBtn.addEventListener('click', ()=>{
  isLogin = !isLogin;
  formTitle.innerText = isLogin ? 'Login' : 'Sign Up';
  submitBtn.innerText = isLogin ? 'Login' : 'Sign Up';
  msg.innerText = '';
});

// Submit
submitBtn.addEventListener('click', ()=>{
  const email = emailInput.value.trim();
  const password = passwordInput.value.trim();
  msg.innerText = '';

  if(!email || !password){
    msg.innerText = "Please fill all fields!";
    return;
  }

  if(isLogin){
    auth.signInWithEmailAndPassword(email, password)
      .then(userCredential=>{
        redirectUser(email);
      })
      .catch(err=>{
        msg.innerText = err.message;
      });
  } else {
    auth.createUserWithEmailAndPassword(email, password)
      .then(userCredential=>{
        redirectUser(email);
      })
      .catch(err=>{
        msg.innerText = err.message;
      });
  }
});

// Redirect based on admin/user
function redirectUser(email){
  if(email === ADMIN_EMAIL){
    window.location.href = "admin.html";
  } else {
    window.location.href = "index.html";
  }
}

// Auto redirect if already logged in
auth.onAuthStateChanged(user=>{
  if(user){
    if(user.email === ADMIN_EMAIL) window.location.href = "admin.html";
    else window.location.href = "index.html";
  }
});
</script>
</body>
</html>