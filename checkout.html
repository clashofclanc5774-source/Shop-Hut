<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Shop â€” Checkout</title>
<style>
:root {
  --primary:#6e7843;
  --bg:#D9CFAB;
  --card:#fff;
  --muted:#000000;
}
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:Inter,system-ui,Arial,sans-serif;background:var(--bg);color:#0f172a;}
header{display:flex;justify-content:space-between;align-items:center;padding:10px 16px;background:#8f8552;color:#fff;}
header h1{font-size:20px;}
main{max-width:600px;margin:20px auto;padding:0 12px;}
section{background:#fff;padding:20px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.08);margin-bottom:20px;}
section h2{margin-bottom:12px;color:var(--primary);}
input,textarea{width:100%;padding:10px;margin-bottom:12px;border-radius:8px;border:1px solid #ccc;}
button{padding:12px 16px;border:0;border-radius:8px;background:var(--primary);color:#fff;font-weight:700;cursor:pointer;}
.cart-summary{margin-bottom:12px;}
.cart-item{display:flex;justify-content:space-between;margin-bottom:8px;}
.cart-item div{flex:1;}
.cart-item .muted{font-size:13px;color:var(--muted);}
footer{text-align:center;padding:18px;font-size:14px;color:var(--muted);}
</style>
</head>
<body>
<section class="checkout-form">
  <h2>Checkout</h2>
  <div>
    <label>Name</label>
    <input type="text" id="name" placeholder="Full Name">
  </div>
  <div>
    <label>Email</label>
    <input type="email" id="email" placeholder="Email">
  </div>
  <div>
    <label>Address</label>
    <input type="text" id="address" placeholder="Address">
  </div>
  <div>
    <label>Phone</label>
    <input type="text" id="phone" placeholder="Phone">
  </div>
  <button id="checkoutBtn">Place Order</button>
</section>

<script>
  /* ====== Keys ====== */
  const KEY_CART = "shop_cart";
  const KEY_PRODUCTS = "products_v1";
  const KEY_ORDERS = "orders_v1";
  
  /* ====== Helpers ====== */
  const el = s => document.querySelector(s);
  const load = (k, fallback) => JSON.parse(localStorage.getItem(k) || JSON.stringify(fallback));
  const save = (k, v) => localStorage.setItem(k, JSON.stringify(v));
  
  /* ====== Checkout Button ====== */
  el("#checkoutBtn").addEventListener("click", () => {
    const name = el("#name").value.trim();
    const phone = el("#phone").value.trim();
    const email = el("#email").value.trim();
    const address = el("#address").value.trim();
    
    if (!name || !phone || !email || !address) {
      alert("Please fill all fields");
      return;
    }
    
    const cart = load(KEY_CART, {});
    const products = load(KEY_PRODUCTS, []);
    
    if (Object.keys(cart).length === 0) {
      alert("Cart is empty");
      return;
    }
    
    /* ====== Build Order Items ====== */
    const items = [];
    let total = 0;
    
    for (const id in cart) {
      const qty = cart[id];
      const p = products.find(x => x.id == id);
      if (!p) continue;
      
      items.push({
        id: p.id,
        name: p.name,
        price: p.price,
        qty
      });
      
      total += p.price * qty;
    }
    
    /* ====== Create Order Object ====== */
    const newOrder = {
      id: Date.now(),
      name,
      phone,
      email,
      address,
      items,
      total,
      status: "Pending"
    };
    
    /* ====== Save Order ====== */
    const allOrders = load(KEY_ORDERS, []);
    allOrders.push(newOrder);
    save(KEY_ORDERS, allOrders);
    
    /* ====== Clear Cart ====== */
    save(KEY_CART, {});
    
    /* ====== Redirect ====== */
    window.location.href = "thankyou.html";
  });
</script>
</body>
</html>