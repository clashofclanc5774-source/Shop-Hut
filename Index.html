<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Shop — Home</title>
<style>
  
:root {
  --primary:#6e7843;
  --bg:#D9CFAB;
  --card:#fff;
  --muted:#000000;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: Inter, system-ui, Arial, sans-serif;
  background: var(--bg);
  color: #0f172a;
}

/* Header */
header {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 10px 16px;
  background: #8f8552;
  box-shadow: 0 2px 6px rgba(2,6,23,0.06);
  position: sticky;
  top: 0;
  z-index: 50;
}

.brand {
  display: flex;
  align-items: center;
  gap: 10px;
}

.logo {
  width: 44px;
  height: 44px;
  border-radius: 10px;
  background: linear-gradient(135deg, var(--primary), #6A5A23);
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  font-weight: 800;
}

.search {
  flex: 1;
  display: flex;
  gap: 6px;
  min-width: 200px;
}

.search input {
  flex: 1;
  padding: 10px;
  border-radius: 10px;
  border: 1px solid #e6eefc;
}

.search button {
  padding: 10px 14px;
  border-radius: 10px;
  border: 0;
  background: var(--primary);
  color: #fff;
  cursor: pointer;
}

.actions {
  display: flex;
  gap: 10px;
  align-items: center;
}

.btn {
  background: var(--primary);
  color: #fff;
  padding: 8px 12px;
  border-radius: 8px;
  border: 0;
  cursor: pointer;
  font-weight: 700;
}
/* Hero and product grid */
.hero {
  display: grid;
  grid-template-columns: 1fr 320px;
  gap: 18px;
  padding: 20px;
}

.hero-card {
  background: var(--card);
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 6px 18px rgba(2,6,23,0.04);
}

.hero h1 {
  margin-bottom: 10px;
  font-size: 28px;
  color: var(--primary);
}

.categories {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 12px;
}

.chip {
  padding: 8px 12px;
  border-radius: 999px;
  background: #f1f5f9;
  cursor: pointer;
}

.chip.active {
  background: linear-gradient(90deg, #eef2ff, #f8fafc);
  color: var(--primary);
  border: 1px solid rgba(37,99,235,0.12);
}

.grid {
  padding: 18px;
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 18px;
}

.card {
  background: var(--card);
  border-radius: 12px;
  padding: 12px;
  box-shadow: 0 6px 18px rgba(2,6,23,0.04);
  display: flex;
  flex-direction: column;
}

.card img {
  width: 100%;
  height: 160px;
  object-fit: cover;
  border-radius: 8px;
}

.card h4 {
  margin: 10px 0 6px;
  font-size: 16px;
}

.meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: 700;
}

.muted { color: var(--muted); font-size: 13px; }
.price { font-weight: 900; }

.card .controls {
  display: flex;
  gap: 8px;
  margin-top: 10px;
}

.small {
  padding: 8px 10px;
  border-radius: 8px;
  border: 0;
  cursor: pointer;
}

/* Footer */
footer {
  text-align: center;
  padding: 18px;
  color: var(--muted);
  font-size: 14px;
}

/* Modal */
.modal {
  position: fixed;
  right: 18px;
  top: 70px;
  width: 320px;
  background: var(--card);
  border-radius: 12px;
  box-shadow: 0 18px 50px rgba(2,6,23,0.18);
  z-index: 100;
  padding: 12px;
  display: none;
}
.modal.open { display: block; }

.cart-item {
  display: flex;
  gap: 10px;
  align-items: center;
  margin-bottom: 10px;
}
.cart-item img {
  width: 64px;
  height: 48px;
  object-fit: cover;
  border-radius: 8px;
}
.cart-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 12px;
}
/* Bottom navigation */
.bottom-nav {
  display: flex;
  justify-content: space-around;
  align-items: center;
  background: #FFFFFF00;
  padding: 10px;
  position: fixed;
  bottom: 0;
  width: 100%;
}
.bottom-nav img {
  width: 40px;
  height: 40px;
  cursor: pointer;
}
.nav-cart {
  position: relative;
  display: inline-block;
}

.nav-cart .badge {
  position: absolute;
  top: -6px;
  right: -6px;
  font-size: 12px;
  padding: 3px 6px;@media (max-width: 768px) {

  /* Sidebar becomes hidden by default */
  .sidebar {
    position: fixed;
    top: 0;
    left: -260px;
    width: 250px;
    height: 100vh;
    background: #fff;
    z-index: 1000;
    box-shadow: 2px 0 8px rgba(0,0,0,0.1);
    transition: left 0.3s ease;
  }

  /* When active, slide in */
  .sidebar.active {
    left: 0;
  }

  /* Mobile Menu Button */
  .mobile-toggle {
    display: block;
    background: var(--primary);
    color: #fff;
    padding: 12px 16px;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1500;
  }

  /* Main content now FULL WIDTH */
  .main {
    margin-left: 0;
    padding-top: 60px; /* space for mobile menu btn */
    width: 100%;
  }

  /* Stack layout vertically */
  .container {
    grid-template-columns: 1fr;
  }

  /* Table responsive scroll */
  .table-wrap {
    overflow-x: auto;
    width: 100%;
  }

  table {
    min-width: 600px;
  }
}
  border-radius: 999px;
  background: #ef4444;
  color: #fff;
}

#adminLink {
  display: none;
}
/* Responsive */
@media(max-width:1100px) {
  .grid { grid-template-columns: repeat(3,1fr); }
  .hero { grid-template-columns: 1fr; }
}

@media(max-width:800px) {
  .grid { grid-template-columns: repeat(2,1fr); }
}

@media(max-width:520px) {
  header { flex-direction: column;
  justify-content:space-between;
  align-items: stretch; }
  .search { width: 100%; order: 3; }
  .actions { order: 2; justify-content: space-between; width: 100%; }
  .brand { order: 1; justify-content: flex-start; width: 100%; }
  .grid { grid-template-columns: 1fr; }
}
</style>
</head>
<body>
<header>
  <div class="brand">
    <div class="logo">SH</div>
    <div style="font-weight:800">Shop</div>
    <button id="adminLink" >Admin</button>
  </div>
  <div class="search">
  <input id="searchInput" placeholder="Search products, categories...">
  <button id="searchBtn">Search</button>
  </div>
  
</header>  
<main>
    <section class="hero">
      <div class="hero-card">
        <h1>Shop top products — curated for you</h1>
        <p class="muted">This is example online shop...</p><div class="categories" id="categories"></div>
  </div>

  <aside class="hero-card sidebar">
    <h3 style="margin-top:0">Filters</h3>
    <label class="muted">Sort by</label>
    <select id="sortSelect" style="width:100%;padding:8px;border-radius:8px;margin-top:8px;margin-bottom:12px;border:1px solid #e6eefc">
      <option value="new">Newest</option>
      <option value="price_asc">Price — low to high</option>
      <option value="price_desc">Price — high to low</option>
      <option value="discount">Highest discount</option>
    </select>

    <label class="muted">Price range</label>
    <input id="priceMin" type="number" placeholder="Min" style="width:48%;padding:8px;border-radius:8px;border:1px solid #e6eefc;margin-right:4%"><input id="priceMax" type="number" placeholder="Max" style="width:48%;padding:8px;border-radius:8px;border:1px solid #e6eefc">
    <div style="margin-top:12px"><button id="applyFilter" class="btn" style="width:100%">Apply</button></div>
  </aside>
</section>

<section class="grid" id="productsGrid"></section>

  </main>  <div id="cartModal" class="modal" aria-hidden>
    <h4 style="margin:0 0 10px">Your Cart</h4>
    <div id="cartList"></div>
    <div class="cart-footer">
      <div class="muted">Total: <strong id="cartTotal">৳0</strong></div>
      <div style="display:flex;gap:8px"><button id="checkoutBtn" class="btn">Checkout</button><button id="clearCart" class="btn ghost">Clear</button></div>
    </div>
  </div>
  <nav class="bottom-nav">
    <a href="Index.html"><img src="/icons/home.png" alt="Home"></a>
    <a href="cart.html" class="nav-cart">
  <img src="/icons/cart.png" alt="Cart">
  <div id="bottomCartBadge" class="badge" style="display:none;">0</div>
</a>
<a href="favorites.html"><img src="/icons/love.png" alt="Favorites"></a>
<a href="login.html"><img src="/icons/user.png" alt="Profile"></a>
<a href="map.html"><img src="/icons/search.png" alt="Map"></a>
</nav>
  <footer>© <span id="year"></span> Shop — Built with the Admin panel sync (localStorage)</footer>  
<script>
  /* ====== Storage Keys ====== */
const KEY_PRODUCTS = 'products_v1';
const KEY_CART = 'shop_cart';

/* ====== Helpers ====== */
const el = s => document.querySelector(s);
const elAll = s => Array.from(document.querySelectorAll(s));
const save = (k,v) => localStorage.setItem(k, JSON.stringify(v));
const load = (k,fallback) => {
  try { return JSON.parse(localStorage.getItem(k)) || fallback; } 
  catch(e){ return fallback; }
};

/* ====== Initialize ====== */
if(!localStorage.getItem(KEY_PRODUCTS)) save(KEY_PRODUCTS, []);
let products = load(KEY_PRODUCTS, []);
let cart = load(KEY_CART, {});

/* ====== UI Elements ====== */
const grid = el('#productsGrid');
const categoriesWrap = el('#categories');
const cartModal = el('#cartModal');
const cartList = el('#cartList');
const cartTotalEl = el('#cartTotal');
const year = el('#year'); if(year) year.textContent = new Date().getFullYear();

/* ====== Render Products ====== */
const render = () => {
  products = load(KEY_PRODUCTS, []);
  const search = el('#searchInput')?.value.trim().toLowerCase() || '';
  const activeCat = elAll('.chip.active').map(c=>c.dataset.cat)[0] || 'all';
  const min = Number(el('#priceMin')?.value || 0);
  const max = Number(el('#priceMax')?.value || Infinity);
  const sort = el('#sortSelect')?.value;

  let list = products.filter(p=>{
    if(activeCat!=='all' && (p.category||'').toLowerCase()!==activeCat) return false;
    if(search && !(p.name.toLowerCase().includes(search) || (p.category||'').toLowerCase().includes(search) || (p.desc||'').toLowerCase().includes(search))) return false;
    if(Number(p.price)<min || Number(p.price)>max) return false;
    return true;
  });

  if(sort==='price_asc') list.sort((a,b)=>a.price-b.price);
  else if(sort==='price_desc') list.sort((a,b)=>b.price-a.price);
  else if(sort==='discount') list.sort((a,b)=> (b.discount||0)-(a.discount||0));
  else list.sort((a,b)=> (b.id||0)-(a.id||0));

  grid.innerHTML = '';
  list.forEach(p=>{
    const card = document.createElement('div'); card.className='card';
    card.innerHTML = `
      <img src="${p.image||''}" alt="${p.name}">
      <h4>${p.name}</h4>
      <div class="muted">${p.category||''}</div>
      <div class="meta">
        <div class="price">৳ ${p.price}</div>
        <div class="muted">${p.discount ? p.discount+'% off' : ''}</div>
      </div>
      <div class="controls">
        <button class="small btn ghost" onclick="quickView('${p.id}')">View</button>
        <button class="small btn" onclick="addToCart('${p.id}')">Add to cart</button>
      </div>`;
    grid.appendChild(card);
  });

  renderCategories();
  renderCartBadge();
};

/* ====== Categories ====== */
const renderCategories = () => {
  const cats = Array.from(new Set(products.map(p=>p.category||'Other')));
  categoriesWrap.innerHTML = '';
  const allChip = document.createElement('div'); 
  allChip.className='chip active'; allChip.textContent='All'; allChip.dataset.cat='all';
  categoriesWrap.appendChild(allChip);

  cats.forEach(c=>{
    const chip = document.createElement('div');
    chip.className='chip'; chip.textContent=c; chip.dataset.cat=c.toLowerCase();
    categoriesWrap.appendChild(chip);
  });

  elAll('.chip').forEach(ch=>{
    ch.addEventListener('click',()=>{
      elAll('.chip').forEach(x=>x.classList.remove('active'));
      ch.classList.add('active');
      render();
    });
  });
};

/* ====== Cart ====== */
const renderCartBadge = () => {
  cart = load(KEY_CART,{});
  const count = Object.values(cart).reduce((s,q)=>s+q,0);
  const bottomBadge = el('#bottomCartBadge');
  if(bottomBadge) {
    bottomBadge.style.display = count>0 ? 'inline-block' : 'none';
    bottomBadge.textContent = count;
  }
};

const renderCart = () => {
  cart = load(KEY_CART,{});
  cartList.innerHTML=''; let total=0;
  for(const id in cart){
    const q = cart[id];
    const p = products.find(x=>x.id == id);
    if(!p) continue;
    total += Number(p.price)*q;
    const div = document.createElement('div'); div.className='cart-item';
    div.innerHTML = `
      <img src="${p.image}">
      <div style="flex:1"><div style="font-weight:800">${p.name}</div><div class="muted">৳ ${p.price} × ${q}</div></div>
      <div>
        <button onclick="changeQty('${id}',${Math.max(0,q-1)})" class="small">-</button>
        <button onclick="changeQty('${id}',${q+1})" class="small">+</button>
      </div>`;
    cartList.appendChild(div);
  }
  cartTotalEl.textContent='৳'+total;
};

/* ====== Cart Actions ====== */
window.addToCart = (id) => {
  products = load(KEY_PRODUCTS,[]);
  const p = products.find(x=>x.id == id);
  if(!p || Number(p.stock)<=0) { alert('Out of stock'); return; }

  cart = load(KEY_CART,{});
  const currentQty = cart[id] || 0;
  if(currentQty >= Number(p.stock)) { alert('Reached max stock'); return; }

  cart[id]=currentQty+1;
  save(KEY_CART, cart);
  renderCartBadge();
};

window.changeQty = (id,newQty)=>{
  cart = load(KEY_CART,{});
  if(newQty<=0) delete cart[id]; else cart[id]=newQty;
  save(KEY_CART, cart);
  renderCartBadge(); renderCart();
};

window.quickView = id => window.location.href=`product.html?id=${id}`;

/* ====== Events ====== */
el('#clearCart')?.addEventListener('click',()=>{if(confirm('Clear cart?')){save(KEY_CART,{}); renderCart(); renderCartBadge();}});
el('#checkoutBtn')?.addEventListener('click',()=>alert('Checkout placeholder'));
el('#searchBtn')?.addEventListener('click',()=>render());
el('#applyFilter')?.addEventListener('click',()=>render());
el('#sortSelect')?.addEventListener('change',()=>render());
window.addEventListener('storage', e=>{if(e.key===KEY_PRODUCTS) render();});

/* ====== Init ====== */
render();
setInterval(()=>{products = load(KEY_PRODUCTS,[]);},2000);
</script>
</body>
</html>